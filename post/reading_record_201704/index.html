<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Elasticsearch,搜索引擎,微服务,机器学习,架构," />





  <link rel="alternate" href="/atom.xml" title="GinoBeFunny" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.1.0" />






<meta name="description" content="关键字：微服务, 架构, Elasticsearch, 机器学习, 搜索引擎。">
<meta property="og:type" content="article">
<meta property="og:title" content="阅读随手记-201704">
<meta property="og:url" content="http://ginobefunny.com/post/reading_record_201704/index.html">
<meta property="og:site_name" content="GinoBeFunny">
<meta property="og:description" content="关键字：微服务, 架构, Elasticsearch, 机器学习, 搜索引擎。">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz/d3Qa7X5fakDAXAMI3ITxFLE7VfsC6chlPMPRX2xI5QzicbXw3pswpYhnAdMj52j7m3O3WUbgiaSF6q86IvXLtVZw/640?tp=webp&wxfrom=5&wx_lazy=1">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz_png/LaW7jDBKBg20ygGehFf5yZsSibbeicKAhQ3MwKlEly57q7qQbWDVoniaIcEMRk2uWqtP0iajzlNAW424cYD8Pn3zyA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz_png/LaW7jDBKBg20ygGehFf5yZsSibbeicKAhQIfHvSlSVf2vUCq6XB4L1ST5qpfHmpccJr8GE9JsV4nC2v5T0IA6cFw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1">
<meta property="og:image" content="http://mmbiz.qpic.cn/mmbiz_png/LaW7jDBKBg20ygGehFf5yZsSibbeicKAhQgA63ZZZx0WjJJQF8d7lROgAjrxKdD41F4XqyOasDpU60kPPGgJFCEQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1">
<meta property="og:updated_time" content="2017-04-25T06:52:32.087Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="阅读随手记-201704">
<meta name="twitter:description" content="关键字：微服务, 架构, Elasticsearch, 机器学习, 搜索引擎。">
<meta name="twitter:image" content="http://mmbiz.qpic.cn/mmbiz/d3Qa7X5fakDAXAMI3ITxFLE7VfsC6chlPMPRX2xI5QzicbXw3pswpYhnAdMj52j7m3O3WUbgiaSF6q86IvXLtVZw/640?tp=webp&wxfrom=5&wx_lazy=1">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://ginobefunny.com/post/reading_record_201704/"/>





  <title> 阅读随手记-201704 | GinoBeFunny </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-86468813-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?ae24983a3465fec4833d9e0c2b125a35";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">GinoBeFunny</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Be a creator of knowledge.</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-my2017">
          <a href="/my2017" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-trophy"></i> <br />
            
            My 2017
          </a>
        </li>
      
        
        <li class="menu-item menu-item-joy_of_reading">
          <a href="/joy_of_reading" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-asterisk"></i> <br />
            
            趣读书
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://ginobefunny.com/post/reading_record_201704/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Gino Zhang">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="GinoBeFunny">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="GinoBeFunny" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                阅读随手记-201704
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-04-08T13:25:52+08:00">
                2017-04-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Reading-Record/" itemprop="url" rel="index">
                    <span itemprop="name">Reading Record</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i> 阅读次数
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>关键字：微服务, 架构, Elasticsearch, 机器学习, 搜索引擎。<br><a id="more"></a></p>
<h3 id="Elasticsearch前沿：ES-5-x改进详解与ES6展望-曾勇"><a href="#Elasticsearch前沿：ES-5-x改进详解与ES6展望-曾勇" class="headerlink" title="Elasticsearch前沿：ES 5.x改进详解与ES6展望  曾勇"></a><a href="https://mp.weixin.qq.com/s/yVbZfE7oWGmnfmcFTeSV4w" target="_blank" rel="external">Elasticsearch前沿：ES 5.x改进详解与ES6展望</a>  曾勇</h3><ul>
<li>如果你的场景是日志，那么基本上数据进去之后是不需要进行修改的，所以现在ES新增了一个append-only的索引模式，也就是当ES是自动生成ID的时候，ES可以跳过不必要的版本检测，<strong>大概可以提升20%左右的索引性能</strong>。</li>
<li>在数据结构方面，新增了多个range字段类型，现在你可以计算连续数据的交并集，可以是时间范围，也可以是数值范围。</li>
<li>下一个特性值得介绍的就是<strong>_all 字段的移除</strong>，去掉_all字段之后，磁盘占用少了不少，索引性能也有一些提升。</li>
<li>现在有一个新的高亮器：Unified Highlighter，大家可能会问，目前ES默认已经提供了3种不同的高亮器，为什么还会有一个新的轮子呢，因为之前的用法有点复杂, 用户选择起来比较困难，新的unified highlighter目的就是简化高亮的使用，可以支持前面3种高亮类型的自动选择。</li>
<li>还有一个是keyword类型可以通过normalizer来进行标准化了，keyword类型相比text类型就是不能分词，但是可能同样需要进行相应的标准化处理，比如统一转成小写，移除标点符号等等，使用方式和analyzer一样。</li>
<li>另一个就是Multi-Word Synonyms，之前是不支持同义词中间有空格分割的，分词的时候会帮你切分开，搜索的时候不能正确处理词组这种同义词。</li>
<li>同义词现在可以支持词组了，也就是说同义词如果是由多个词组成的，不会在分词的时候被傻傻的拆开，而是正确的处理。</li>
<li>还一个就是字段折叠（ Field collapsing），这个特性比较有意思，你可以在搜索的时候，按某个字段作为维度进行去重，我这里写过一篇详细的博客，有兴趣的可以去看看：<a href="http://elasticsearch.cn/article/132" target="_blank" rel="external">http://elasticsearch.cn/article/132</a></li>
<li>ES的搜索，对于一些耗时较长的查询，现在可以通过ES的任务管理机制来进行取消了，感兴趣的可以查看文档：<a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.3/search.html#global-search-cancellation" target="_blank" rel="external">https://www.elastic.co/guide/en/elasticsearch/reference/5.3/search.html#global-search-cancellation</a></li>
<li>现在term aggs提供了一种分区的概念，你可以对一个字段，分n次进行聚合，分而治之，有兴趣的可以看看文档：<a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.3/search-aggregations-bucket-terms-aggregation.html#_filtering_values_with_partitions" target="_blank" rel="external">https://www.elastic.co/guide/en/elasticsearch/reference/5.3/search-aggregations-bucket-terms-aggregation.html#_filtering_values_with_partitions</a></li>
<li>当你的集群变红的时候，新增的 /_cluster/allocation/explain 接口能够直接告诉你哪里出了问题；</li>
<li>Java REST Client也有了更新，ES之前提供了一个偏底层的Java HTTP REST client，但是用起来太费劲，需要手动拼 JSON，现在Java REST Client分成了Java High Level REST Client和Java Low Level REST Client， High Level基于Low Level来实现，顾名思义，提供更多用户方便的接口调用，High Level REST Client将提供和Transport Client类似的接口，不用手动去拼接QueryDSL的JSON了，目测在 5.5 版本提供。</li>
<li>以前的搜索的reduce操作都是要等到把每个分片的结果都拿到本地之后再做合并，现在新增的batched search reduce phases提供了分批进行reduce的行为，也就是不用全部拿到之后再做reduce，而是拿到足够的分配（默认512）之后就开始做reduce，然后拿到合并结果，释放相关的资源。</li>
<li>ES 6.0展望：稀疏性Doc Values的支持；Index sorting，即在索引阶段的排序，即我们查询的时候有时候会根据某个字段的值进行排序，比如时间、编号等等；顺序号的支持，每个es的操作都有一个顺序编号，这个属于es内部的一个功能，可以提供快速的分片副本恢复或同步、跨数据中心的节点恢复、甚至提供一个Changes API 等；无缝滚动升级，使之能够从5的最后一个版本滚动升级到6的最后一个版本，不需要集群的完整重启。</li>
</ul>
<h3 id="Elasticsearch-5-x-字段折叠的使用-medcl"><a href="#Elasticsearch-5-x-字段折叠的使用-medcl" class="headerlink" title="Elasticsearch 5.x 字段折叠的使用 medcl"></a><a href="http://elasticsearch.cn/article/132" target="_blank" rel="external">Elasticsearch 5.x 字段折叠的使用</a> medcl</h3><ul>
<li>什么是字段折叠，可以理解就是按特定字段进行合并去重，比如我们有一个菜谱搜索，我希望按菜谱的“菜系”字段进行折叠，即返回结果每个菜系都返回一个结果，也就是按菜系去重，我搜索关键字“鱼”，要去返回的结果里面各种菜系都有，有湘菜，有粤菜，有中餐，有西餐，别全是湘菜，就是这个意思，通过按特定字段折叠之后，来丰富搜索结果的多样性。</li>
<li>有人肯定会想到，使用term agg+ top hits agg来实现啊，这种组合两种聚和的方式可以实现上面的功能，不过也有一些局限性，比如，不能分页、结果不够精确以及数据量大的情况下聚合比较慢。</li>
<li>而新的的字段折叠的方式是怎么实现的的呢，有这些要点：折叠+取inner_hits分两阶段执行，所以top hits永远是精确的；字段折叠只在top hits层执行，不需要每次都在完整的结果集上对为每个折叠主键计算实际的doc values值，和term agg 相比要节省很多内存；因为只在top hits上进行折叠，所以相比组合聚合的方式，速度要快很多；折叠top docs不需要使用全局序列来转换string，相比agg这也节省了很多内存；分页成为可能，和常规搜索一样，具有相同的局限，先获取from+size的内容，再合并；search_after和scroll暂未实现，不过具备可行性；折叠只影响搜索结果，不影响聚合，搜索结果的total是所有的命中纪录数，去重的结果数未知（无法计算）。</li>
<li>来个例子：</li>
</ul>
<pre><code>PUT recipes
POST recipes/type/_mapping
{
  &quot;properties&quot;: {
    &quot;name&quot;:{
      &quot;type&quot;: &quot;text&quot;
    },
    &quot;rating&quot;:{
      &quot;type&quot;: &quot;float&quot;
    },&quot;type&quot;:{
      &quot;type&quot;: &quot;keyword&quot;
    }
  }
}


POST recipes/type/
{
  &quot;name&quot;:&quot;清蒸鱼头&quot;,&quot;rating&quot;:1,&quot;type&quot;:&quot;湘菜&quot;
}
POST recipes/type/
{
  &quot;name&quot;:&quot;剁椒鱼头&quot;,&quot;rating&quot;:2,&quot;type&quot;:&quot;湘菜&quot;
}
POST recipes/type/
{
  &quot;name&quot;:&quot;红烧鲫鱼&quot;,&quot;rating&quot;:3,&quot;type&quot;:&quot;湘菜&quot;
}
POST recipes/type/
{
  &quot;name&quot;:&quot;鲫鱼汤（辣）&quot;,&quot;rating&quot;:3,&quot;type&quot;:&quot;湘菜&quot;
}
POST recipes/type/
{
  &quot;name&quot;:&quot;鲫鱼汤（微辣）&quot;,&quot;rating&quot;:4,&quot;type&quot;:&quot;湘菜&quot;
}
POST recipes/type/
{
  &quot;name&quot;:&quot;鲫鱼汤（变态辣）&quot;,&quot;rating&quot;:5,&quot;type&quot;:&quot;湘菜&quot;
}
POST recipes/type/
{
  &quot;name&quot;:&quot;广式鲫鱼汤&quot;,&quot;rating&quot;:5,&quot;type&quot;:&quot;粤菜&quot;
}
POST recipes/type/
{
  &quot;name&quot;:&quot;鱼香肉丝&quot;,&quot;rating&quot;:2,&quot;type&quot;:&quot;川菜&quot;
}
POST recipes/type/
{
  &quot;name&quot;:&quot;奶油鲍鱼汤&quot;,&quot;rating&quot;:2,&quot;type&quot;:&quot;西菜&quot;
} 

GET recipes/type/_search
{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;name&quot;: &quot;鱼&quot;
    }
  },
  &quot;collapse&quot;: {
    &quot;field&quot;: &quot;type&quot;,
    &quot;inner_hits&quot;: {
      &quot;name&quot;: &quot;top_rated&quot;,
      &quot;size&quot;: 2,
      &quot;sort&quot;: [
        {
          &quot;rating&quot;: &quot;desc&quot;
        }
      ]
    }
  },
  &quot;sort&quot;: [
    {
      &quot;rating&quot;: {
        &quot;order&quot;: &quot;desc&quot;
      }
    }
  ],
  &quot;size&quot;: 2,
  &quot;from&quot;: 0
}
</code></pre><h3 id="如何做出搜索和推荐深度融合的兴趣引擎架构-田明军"><a href="#如何做出搜索和推荐深度融合的兴趣引擎架构-田明军" class="headerlink" title="如何做出搜索和推荐深度融合的兴趣引擎架构 田明军"></a><a href="https://mp.weixin.qq.com/s/7DOj5Hed3Q4Crr8ng4TeBw" target="_blank" rel="external">如何做出搜索和推荐深度融合的兴趣引擎架构</a> 田明军</h3><h3 id="携程实时用户行为系统实践-陈清渠"><a href="#携程实时用户行为系统实践-陈清渠" class="headerlink" title="携程实时用户行为系统实践  陈清渠"></a><a href="https://mp.weixin.qq.com/s/OJdlpP62YWGmVnBWsfpVZw" target="_blank" rel="external">携程实时用户行为系统实践</a>  陈清渠</h3><h3 id="Spark技术在京东智能供应链预测的应用-杨冬越-郭景瞻"><a href="#Spark技术在京东智能供应链预测的应用-杨冬越-郭景瞻" class="headerlink" title="Spark技术在京东智能供应链预测的应用 杨冬越 郭景瞻"></a><a href="https://mp.weixin.qq.com/s/FK4rjuWyI6S6IZ4pAdMc4g" target="_blank" rel="external">Spark技术在京东智能供应链预测的应用</a> 杨冬越 郭景瞻</h3><h3 id="对CQRS的基础理解-张逸"><a href="#对CQRS的基础理解-张逸" class="headerlink" title="对CQRS的基础理解 张逸"></a><a href="https://mp.weixin.qq.com/s/S2UGCS00gWzr-nuAapR96g" target="_blank" rel="external">对CQRS的基础理解</a> 张逸</h3><ul>
<li>CQRS即Command Query Responsibility Seperation（命令查询职责分离），其设计思想来源于Mayer提出的CQS（Command Query Seperation）。这种命令与查询的分离方式，可以更好地控制请求者的操作。查询操作不会造成数据的修改，因而它属于一种幂等操作，可以反复地发起，而不用担心会对系统造成影响。基于这种特性，我们还可以为其提供缓存，从而改进查询的性能。命令操作则与之相反，它会直接影响系统信息的改变。</li>
<li>查询操作与命令操作对事务的要求也不一样。由于查询操作不会改变系统状态，因而，不会产生最终的数据不一致。从请求响应的角度来看，查询操作常常需要同步请求，实时返回结果；命令操作则不然，因为我们并不期待命令操作必须返回结果，这就可以采用fire-and-forget方式，而这种方式正是运用异步操作的前提。此外，对于大多数软件系统而言，查询操作发起的频率通常要远远高于命令操作。如上种种，都是将命令与查询进行分离的根本原因。</li>
<li>下图是CQRS框架AxonFramework官方文档给出的CQRS架构图。在这个架构图中，最核心的概念是Command、Event。以我的理解，CQRS模式的风格源头就是基于事件的异步状态机模型。抛开命令查询分离这一核心原则，这才是CQRS的基础内容。</li>
</ul>
<p><img src="http://mmbiz.qpic.cn/mmbiz/d3Qa7X5fakDAXAMI3ITxFLE7VfsC6chlPMPRX2xI5QzicbXw3pswpYhnAdMj52j7m3O3WUbgiaSF6q86IvXLtVZw/640?tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="CQRS架构图"></p>
<ul>
<li>CQRS对设计者的影响，是将领域逻辑，尤其是业务流程，皆看做是一种领域对象状态迁移的过程。这一点与REST将HTTP应用协议看做是应用状态迁移的引擎，有着异曲同工之妙。这种观点（或设计视图）引出了Command与Event的概念。Command是系统中会引起状态变化的活动，通常是一种命令语气，例如注册会议RegisterToConference。至于Event，则描述了某种事件的发生，通常是命令的结果（但并不一定是直接结果，但源头一定是因为发送了命令），例如OrderConfirmed。</li>
</ul>
<h3 id="我对CQRS-EventSourcing架构的思考-汤雪华"><a href="#我对CQRS-EventSourcing架构的思考-汤雪华" class="headerlink" title="我对CQRS/EventSourcing架构的思考 汤雪华"></a><a href="https://mp.weixin.qq.com/s/uZPzDopFApOHTXzwEbfluQ" target="_blank" rel="external">我对CQRS/EventSourcing架构的思考</a> 汤雪华</h3><ul>
<li><strong>聚合</strong>，它通过定义对象之间清晰的所属关系和边界来实现领域模型的内聚，并避免了错综复杂的难以维护的对象关系网的形成。聚合定义了一组具有内聚关系的相关对象的集合，我们把聚合看作是一个修改数据的最小原子单元。</li>
</ul>
<p><img src="http://mmbiz.qpic.cn/mmbiz_png/LaW7jDBKBg20ygGehFf5yZsSibbeicKAhQ3MwKlEly57q7qQbWDVoniaIcEMRk2uWqtP0iajzlNAW424cYD8Pn3zyA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="聚示意图"></p>
<ul>
<li><strong>聚合根</strong>：每个聚合都有一个根对象，根对象管理聚合内的其他子对象（实体、值对象），聚合之间的交互都是通过聚合根来交互，不能绕过聚合根去直接和聚合下的子实体进行交互。</li>
<li><strong>Eventual Consistency</strong>：聚合内的数据修改，是ACID强一致性的；跨聚合的数据修改，是最终一致性的。遵守这个原则，可以让我们最大化的降低并发冲突，从而最大化的提高整个系统的吞吐。</li>
<li><strong>In Memory</strong>：指整个系统中的所有的聚合根对象都活在内存。在In-Memory的架构下，当要修改某个聚合根的状态时，它已经在内存，我们可以直接拿到该对象的引用，且框架会尽量保证聚合根对象的状态就是最新的。聚合根是在内存中的最小计算单元，每个聚合内部都封装了业务规则，并保证数据的强一致性。</li>
<li><strong>Event Sourcing</strong>：不保存对象的最新状态，而是保存对象产生的所有事件；通过事件溯源得到对象最新状态。</li>
<li><strong>Event Sourcing VS CRUD</strong>：对于CRUD，DB的记录可变，可以增删改；对于ES，没有更新、删除，只有Append Event，不可变。</li>
<li><strong>Actor Model</strong>：其核心思想是对象直接不会直接调用来通信，而是通过发消息来通信。每个Actor都有一个Mailbox，它收到的所有的消息都会先放入Mailbox中，然后Actor内部单线程处理Mailbox中的消息。从而保证对同一个Actor的任何消息的处理，都是线性的，无并发冲突。从全局上来看，就是整个系统中，有很多的Actor，每个Actor都在处理自己Mailbox中的消息，Actor之间通过发消息来通信。Akka框架就是实现Actor模型的并行开发框架，并且Akka框架融入了聚合、In-Memory、Event Sourcing这些概念。Actor非常适合作为DDD聚合根。Actor的状态修改是由事件驱动的，事件被持久化起来，然后通过Event Sourcing的技术，还原特定Actor的最新状态到内存。</li>
</ul>
<p><img src="http://mmbiz.qpic.cn/mmbiz_png/LaW7jDBKBg20ygGehFf5yZsSibbeicKAhQIfHvSlSVf2vUCq6XB4L1ST5qpfHmpccJr8GE9JsV4nC2v5T0IA6cFw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="Actor Model"></p>
<ul>
<li>下图是<strong>CQRS架构的典型架构图</strong>。CQRS架构的核心出发点是将整个系统的架构分割为读和写两部分，从而方便我们对读写两端进行分开优化；CQRS架构的一致性模型为最终一致性。采用CQRS架构的一个前提是，你的系统要接受系统使用者查询到的数据可能不是最新的，而是有几个毫秒的延迟。</li>
</ul>
<p><img src="http://mmbiz.qpic.cn/mmbiz_png/LaW7jDBKBg20ygGehFf5yZsSibbeicKAhQgA63ZZZx0WjJJQF8d7lROgAjrxKdD41F4XqyOasDpU60kPPGgJFCEQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1" alt="CQRS架构"></p>
<ul>
<li><strong>CQRS架构的适用场景</strong>：当我们的应用的写模型和读模型差别比较大时；当我们希望实践DDD时，因为CQRS架构可以让我们实现领域模型不受任何ORM框架带来的对象和数据库的阻抗失衡的影响；当我们希望对系统的查询性能和写入性能分开进行优化时，尤其是读/写比非常高的系统，CQ分离是必须的；当我们希望我们的系统同时满足高并发的写、高并发的读的时候；因为CQRS架构可以做到C端最大化的写，Q端非常方便的提供可扩展的读模型。</li>
<li><strong>C端的命令执行流程</strong>：发送命令到分布式MQ；然后命令的订阅者处理命令；订阅者内部根据不同的命令调用不同的Command Handler进行处理；Command Handler内部根据命令所指定的聚合根ID从In-Memory内存中直接获取聚合根对象的引用，然后操作聚合根对象；聚合根对象状态发生变化并产生事件；框架负责自动持久化事件到Event Storage；框架负责将事件发布到Event MQ；Event订阅者订阅事件，然后调用对应的Event Handler进行处理，如更新Data Storage；</li>
<li><strong>Q端的查询执行流程</strong>：调用轻薄的Query Service，传如Query DTO；Query Service从读库进行查询并返回结果；</li>
<li>挖掘出<strong>更多有用的特性</strong>：一个命令只允许修改一个聚合根；命令或事件在分布式MQ的路由根据聚合根ID来路由，也就是同一个聚合根的命令和事件都在一个队列里；引入Command Mailbox，Event Mailbox这两个概念，将聚合根需要处理的命令和产生的事件都队列化去并发，做到架构上最大的并行，将并发降低到最低；引入Group Commit技术，做到整个C端的架构层面支持批量提交聚合根产生的事件，从而极大的提高C端的整体吞吐量；通过引入Saga的概念，做到基于事件驱动的最终一致性；</li>
<li><strong>Event Sourcing的优点</strong>：记录了数据完整变化过程，最详细的日志；可以将系统还原到任何一个时间点的状态；Domain Event非常有业务价值，BI分析事件能预测业务未来发展情况；可以有效解决线上的数据问题，线下重演一遍，就能知道哪里出问题；不再需要用到ORM，所以没有O/R阻抗失衡的问题，领域模型的设计可以更OO；将Command、Event串联起来，可以分析聚合根的整个变化过程，有助于排查分析问题；自动并发冲突检测、命令的幂等处理；</li>
<li><strong>Event Sourcing的缺点</strong>：事件数量巨大，如何存储；如果单个聚合根事件过多，则重演会造成性能问题；领域模型重构被制约，事件的修改必须兼容以前的结构；数据库订正不在有效；架构实践门槛高，没有成熟框架支撑基本无望；需要具备DDD领域建模的能力；事件驱动状态的修改，思维转变难。</li>
</ul>
<h3 id="北大AI公开课第6讲-王俊：DNA是生命数字化的过程，AI改变生命科学-新智元"><a href="#北大AI公开课第6讲-王俊：DNA是生命数字化的过程，AI改变生命科学-新智元" class="headerlink" title="北大AI公开课第6讲 王俊：DNA是生命数字化的过程，AI改变生命科学 新智元"></a><a href="https://mp.weixin.qq.com/s/h7IhHK1vfrHQYDpFLVZ7yA" target="_blank" rel="external">北大AI公开课第6讲 王俊：DNA是生命数字化的过程，AI改变生命科学</a> 新智元</h3><p>视频回放链接：<a href="http://www.iqiyi.com/l_19rrfgal1z.html" target="_blank" rel="external">http://www.iqiyi.com/l_19rrfgal1z.html</a></p>
<h3 id="北大AI公开课第7讲-徐伟：AGI-2050年前实现可能性超50-机器学习研究会"><a href="#北大AI公开课第7讲-徐伟：AGI-2050年前实现可能性超50-机器学习研究会" class="headerlink" title="北大AI公开课第7讲 徐伟：AGI 2050年前实现可能性超50% 机器学习研究会"></a><a href="https://mp.weixin.qq.com/s/mBfXDpqabIFdksCYTixcaw" target="_blank" rel="external">北大AI公开课第7讲 徐伟：AGI 2050年前实现可能性超50%</a> 机器学习研究会</h3><p>视频回放链接：<a href="http://www.iqiyi.com/l_19rrbkb3az.html" target="_blank" rel="external">http://www.iqiyi.com/l_19rrbkb3az.html</a></p>
<h3 id="北大AI公开课第8讲-李航：自然语言处理——理想与现实、机遇与挑战-机器学习研究会"><a href="#北大AI公开课第8讲-李航：自然语言处理——理想与现实、机遇与挑战-机器学习研究会" class="headerlink" title="北大AI公开课第8讲 李航：自然语言处理——理想与现实、机遇与挑战  机器学习研究会"></a><a href="https://mp.weixin.qq.com/s/Kxu_4QUdWQrjue9W1TvfDg" target="_blank" rel="external">北大AI公开课第8讲 李航：自然语言处理——理想与现实、机遇与挑战</a>  机器学习研究会</h3><h3 id="机器学习演化史，方法、应用场景与发展趋势-新智元"><a href="#机器学习演化史，方法、应用场景与发展趋势-新智元" class="headerlink" title="机器学习演化史，方法、应用场景与发展趋势  新智元"></a><a href="https://mp.weixin.qq.com/s/B4RV1iO9fciguqP9J1hCxQ" target="_blank" rel="external">机器学习演化史，方法、应用场景与发展趋势</a>  新智元</h3><h3 id="关于微服务的发展方向，我们和5位专家聊了聊-Mark-Little-薛命灯"><a href="#关于微服务的发展方向，我们和5位专家聊了聊-Mark-Little-薛命灯" class="headerlink" title="关于微服务的发展方向，我们和5位专家聊了聊 Mark Little/薛命灯"></a><a href="https://mp.weixin.qq.com/s/F4SLNmCs7iIkZe9nxnXDdA" target="_blank" rel="external">关于微服务的发展方向，我们和5位专家聊了聊</a> Mark Little/薛命灯</h3><h3 id="kafka数据可靠性深度解读-朱忠华"><a href="#kafka数据可靠性深度解读-朱忠华" class="headerlink" title="kafka数据可靠性深度解读 朱忠华"></a><a href="https://mp.weixin.qq.com/s/ExzSzf0ue7d-_Qv8q6p9bw" target="_blank" rel="external">kafka数据可靠性深度解读</a> 朱忠华</h3><h3 id="去哪儿网机票搜索系统的高并发架构设计-蒋志伟"><a href="#去哪儿网机票搜索系统的高并发架构设计-蒋志伟" class="headerlink" title="去哪儿网机票搜索系统的高并发架构设计 蒋志伟"></a><a href="https://mp.weixin.qq.com/s/1ipdByfsaTcHpo_W5gJVug" target="_blank" rel="external">去哪儿网机票搜索系统的高并发架构设计</a> 蒋志伟</h3><h3 id="聊聊分布式定时任务中间件架构及其实现-张亮"><a href="#聊聊分布式定时任务中间件架构及其实现-张亮" class="headerlink" title="聊聊分布式定时任务中间件架构及其实现 张亮"></a><a href="https://mp.weixin.qq.com/s/pqOujhOQlxw6XR_e7MP02w" target="_blank" rel="external">聊聊分布式定时任务中间件架构及其实现</a> 张亮</h3><h3 id="2017年会是Serverless爆发之年吗？-麦克周"><a href="#2017年会是Serverless爆发之年吗？-麦克周" class="headerlink" title="2017年会是Serverless爆发之年吗？ 麦克周"></a><a href="https://mp.weixin.qq.com/s/vQ22_disiOIbfOHz95Ls-w" target="_blank" rel="external">2017年会是Serverless爆发之年吗？</a> 麦克周</h3><h3 id="Java-9新特性介绍及Jigsaw一览-QCON-杨晓峰"><a href="#Java-9新特性介绍及Jigsaw一览-QCON-杨晓峰" class="headerlink" title="Java 9新特性介绍及Jigsaw一览 QCON/杨晓峰"></a><a href="http://2017.qconbeijing.com/" target="_blank" rel="external">Java 9新特性介绍及Jigsaw一览</a> QCON/杨晓峰</h3><h3 id="打造高性能高可用的搜索服务——爱奇艺搜索架构实践-QCON-陈爱云"><a href="#打造高性能高可用的搜索服务——爱奇艺搜索架构实践-QCON-陈爱云" class="headerlink" title="打造高性能高可用的搜索服务——爱奇艺搜索架构实践 QCON/陈爱云"></a><a href="http://2017.qconbeijing.com/" target="_blank" rel="external">打造高性能高可用的搜索服务——爱奇艺搜索架构实践</a> QCON/陈爱云</h3><h3 id="高速发展业务的架构应对实践-QCON-陈霖"><a href="#高速发展业务的架构应对实践-QCON-陈霖" class="headerlink" title="高速发展业务的架构应对实践 QCON/陈霖"></a><a href="http://2017.qconbeijing.com/" target="_blank" rel="external">高速发展业务的架构应对实践</a> QCON/陈霖</h3><h3 id="美团点评旅游推荐系统的演进-QCON-郑刚"><a href="#美团点评旅游推荐系统的演进-QCON-郑刚" class="headerlink" title="美团点评旅游推荐系统的演进 QCON/郑刚"></a><a href="http://2017.qconbeijing.com/" target="_blank" rel="external">美团点评旅游推荐系统的演进</a> QCON/郑刚</h3><h3 id="深度学习在电子商务中的应用-QCON-程进兴"><a href="#深度学习在电子商务中的应用-QCON-程进兴" class="headerlink" title="深度学习在电子商务中的应用 QCON/程进兴"></a><a href="http://2017.qconbeijing.com/" target="_blank" rel="external">深度学习在电子商务中的应用</a> QCON/程进兴</h3><h3 id="微信红包后台系统可用性设计实践-QCON-michaelfang"><a href="#微信红包后台系统可用性设计实践-QCON-michaelfang" class="headerlink" title="微信红包后台系统可用性设计实践 QCON/michaelfang"></a><a href="http://2017.qconbeijing.com/" target="_blank" rel="external">微信红包后台系统可用性设计实践</a> QCON/michaelfang</h3><h3 id="异步场景下的全栈溯源-QCON-杨金全"><a href="#异步场景下的全栈溯源-QCON-杨金全" class="headerlink" title="异步场景下的全栈溯源 QCON/杨金全"></a><a href="http://2017.qconbeijing.com/" target="_blank" rel="external">异步场景下的全栈溯源</a> QCON/杨金全</h3><h3 id="异构系统链路追踪——滴滴-trace-实践-QCON"><a href="#异构系统链路追踪——滴滴-trace-实践-QCON" class="headerlink" title="异构系统链路追踪——滴滴 trace 实践 QCON"></a><a href="http://2017.qconbeijing.com/" target="_blank" rel="external">异构系统链路追踪——滴滴 trace 实践</a> QCON</h3>
      
    </div>

    <div>
      
        
<div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/images/wechat.jpg" alt="Gino Zhang wechat" style="width: 200px; max-width: 100%;"/>
    <div>扫一扫，关注我的微信公众号</div>
</div>


      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Elasticsearch/" rel="tag"># Elasticsearch</a>
          
            <a href="/tags/搜索引擎/" rel="tag"># 搜索引擎</a>
          
            <a href="/tags/微服务/" rel="tag"># 微服务</a>
          
            <a href="/tags/机器学习/" rel="tag"># 机器学习</a>
          
            <a href="/tags/架构/" rel="tag"># 架构</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/post/learning_amqp/" rel="next" title="AMQP学习小记">
                <i class="fa fa-chevron-left"></i> AMQP学习小记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="post/reading_record_201704/"
           data-title="阅读随手记-201704" data-url="http://ginobefunny.com/post/reading_record_201704/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Gino Zhang" />
          <p class="site-author-name" itemprop="name">Gino Zhang</p>
          <p class="site-description motion-element" itemprop="description">Just be funny!</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">31</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">117</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ginobefun/" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/5202141318/profile?topnav=1&wvr=6&is_all=1" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.douban.com/people/ginobefun/" target="_blank" title="DouBan">
                  
                    <i class="fa fa-fw fa-book"></i>
                  
                  DouBan
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/ginobefun/activities" target="_blank" title="ZhiHu">
                  
                    <i class="fa fa-fw fa-ticket"></i>
                  
                  ZhiHu
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/ginobefun" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/0ffaa3601861" target="_blank" title="JianShu">
                  
                    <i class="fa fa-fw fa-gift"></i>
                  
                  JianShu
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-block">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://wangnan.tech/" title="王楠的博客" target="_blank">王楠的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://toutiao.io/subjects/160373" title="开发者头条" target="_blank">开发者头条</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.yohobuy.com/" title="Yoho!Buy" target="_blank">Yoho!Buy</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://theme-next.iissnan.com/" title="Hexo Next Theme" target="_blank">Hexo Next Theme</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Elasticsearch前沿：ES-5-x改进详解与ES6展望-曾勇"><span class="nav-number">1.</span> <span class="nav-text">Elasticsearch前沿：ES 5.x改进详解与ES6展望  曾勇</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Elasticsearch-5-x-字段折叠的使用-medcl"><span class="nav-number">2.</span> <span class="nav-text">Elasticsearch 5.x 字段折叠的使用 medcl</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#如何做出搜索和推荐深度融合的兴趣引擎架构-田明军"><span class="nav-number">3.</span> <span class="nav-text">如何做出搜索和推荐深度融合的兴趣引擎架构 田明军</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#携程实时用户行为系统实践-陈清渠"><span class="nav-number">4.</span> <span class="nav-text">携程实时用户行为系统实践  陈清渠</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spark技术在京东智能供应链预测的应用-杨冬越-郭景瞻"><span class="nav-number">5.</span> <span class="nav-text">Spark技术在京东智能供应链预测的应用 杨冬越 郭景瞻</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#对CQRS的基础理解-张逸"><span class="nav-number">6.</span> <span class="nav-text">对CQRS的基础理解 张逸</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#我对CQRS-EventSourcing架构的思考-汤雪华"><span class="nav-number">7.</span> <span class="nav-text">我对CQRS/EventSourcing架构的思考 汤雪华</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#北大AI公开课第6讲-王俊：DNA是生命数字化的过程，AI改变生命科学-新智元"><span class="nav-number">8.</span> <span class="nav-text">北大AI公开课第6讲 王俊：DNA是生命数字化的过程，AI改变生命科学 新智元</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#北大AI公开课第7讲-徐伟：AGI-2050年前实现可能性超50-机器学习研究会"><span class="nav-number">9.</span> <span class="nav-text">北大AI公开课第7讲 徐伟：AGI 2050年前实现可能性超50% 机器学习研究会</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#北大AI公开课第8讲-李航：自然语言处理——理想与现实、机遇与挑战-机器学习研究会"><span class="nav-number">10.</span> <span class="nav-text">北大AI公开课第8讲 李航：自然语言处理——理想与现实、机遇与挑战  机器学习研究会</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#机器学习演化史，方法、应用场景与发展趋势-新智元"><span class="nav-number">11.</span> <span class="nav-text">机器学习演化史，方法、应用场景与发展趋势  新智元</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关于微服务的发展方向，我们和5位专家聊了聊-Mark-Little-薛命灯"><span class="nav-number">12.</span> <span class="nav-text">关于微服务的发展方向，我们和5位专家聊了聊 Mark Little/薛命灯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kafka数据可靠性深度解读-朱忠华"><span class="nav-number">13.</span> <span class="nav-text">kafka数据可靠性深度解读 朱忠华</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#去哪儿网机票搜索系统的高并发架构设计-蒋志伟"><span class="nav-number">14.</span> <span class="nav-text">去哪儿网机票搜索系统的高并发架构设计 蒋志伟</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#聊聊分布式定时任务中间件架构及其实现-张亮"><span class="nav-number">15.</span> <span class="nav-text">聊聊分布式定时任务中间件架构及其实现 张亮</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2017年会是Serverless爆发之年吗？-麦克周"><span class="nav-number">16.</span> <span class="nav-text">2017年会是Serverless爆发之年吗？ 麦克周</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-9新特性介绍及Jigsaw一览-QCON-杨晓峰"><span class="nav-number">17.</span> <span class="nav-text">Java 9新特性介绍及Jigsaw一览 QCON/杨晓峰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#打造高性能高可用的搜索服务——爱奇艺搜索架构实践-QCON-陈爱云"><span class="nav-number">18.</span> <span class="nav-text">打造高性能高可用的搜索服务——爱奇艺搜索架构实践 QCON/陈爱云</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高速发展业务的架构应对实践-QCON-陈霖"><span class="nav-number">19.</span> <span class="nav-text">高速发展业务的架构应对实践 QCON/陈霖</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#美团点评旅游推荐系统的演进-QCON-郑刚"><span class="nav-number">20.</span> <span class="nav-text">美团点评旅游推荐系统的演进 QCON/郑刚</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#深度学习在电子商务中的应用-QCON-程进兴"><span class="nav-number">21.</span> <span class="nav-text">深度学习在电子商务中的应用 QCON/程进兴</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#微信红包后台系统可用性设计实践-QCON-michaelfang"><span class="nav-number">22.</span> <span class="nav-text">微信红包后台系统可用性设计实践 QCON/michaelfang</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异步场景下的全栈溯源-QCON-杨金全"><span class="nav-number">23.</span> <span class="nav-text">异步场景下的全栈溯源 QCON/杨金全</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异构系统链路追踪——滴滴-trace-实践-QCON"><span class="nav-number">24.</span> <span class="nav-text">异构系统链路追踪——滴滴 trace 实践 QCON</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gino Zhang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i> 访问人数<span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i> 总访问量<span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"ginobefunny"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  


</body>
</html>
